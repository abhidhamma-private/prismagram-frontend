(this["webpackJsonpprismagram-frontend"]=this["webpackJsonpprismagram-frontend"]||[]).push([[0],{56:function(e,n,t){e.exports=t(77)},77:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(22),o=t.n(c),l=t(6),u=t(17),i=t(7),m=t(82),s=t(14),f=(t(61),t(43)),b=t.n(f);function d(){var e=Object(l.a)(["\n    ",";\n    @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600,700');\n    * {\n        box-sizing:border-box;\n    }\n    body {\n        background-color:",";\n        color:",";\n        font-size:14px;\n        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    }\n    a {\n        color:",";\n        text-decoration:none;\n    }\n    input:focus{\n        outline:none;\n    }\n"]);return d=function(){return e},e}var g=Object(i.createGlobalStyle)(d(),b.a,(function(e){return e.theme.bgColor}),(function(e){return e.theme.blackColor}),(function(e){return e.theme.blueColor})),p={bgColor:"#FAFAFA",blackColor:"#262626",darkGreyColor:"#999",lightGreyColor:"#c7c7c7",redColor:"#ED4956",blueColor:"#3897f0",darkBlueColor:"#003569",boxBorder:"1px solid #e6e6e6",borderRadius:"4px",whiteBox:"border:".concat("1px solid #e6e6e6",";\n             border-radius:").concat("4px",";\n             background-color:white;\n            ")},v=t(20),h=t(53),E=t(25),x=t.n(E),O=t(21);function j(){var e=Object(l.a)(["\n  border: 0;\n  border: ",";\n  border-radius: ",";\n  background-color: ",";\n  height: 35px;\n  font-size: 12px;\n  padding: 0px 15px;\n"]);return j=function(){return e},e}var k=i.default.input(j(),(function(e){return e.theme.boxBorder}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.bgColor})),S=function(e){var n=e.placeholder,t=e.required,r=void 0===t||t,c=e.value,o=e.onChange,l=e.type,u=void 0===l?"text":l;return a.a.createElement(k,{placeholder:n,required:r,value:c,onChange:o,type:u})};function w(){var e=Object(l.a)(["\n  width: 100%;\n  border: 0;\n  border-radius: ",";\n  color: white;\n  font-weight: 600;\n  background-color: ",";\n  text-align: center;\n  padding: 7px 0px;\n  font-size: 14px;\n"]);return w=function(){return e},e}var y=i.default.button(w(),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.blueColor})),C=function(e){var n=e.text;return a.a.createElement(y,null,n)};function I(){var e=Object(l.a)(["\n  padding: 40px;\n  padding-bottom: 30px;\n  margin-bottom: 15px;\n  form {\n    width: 100%;\n    input {\n      width: 100%;\n      &:not(:last-child) {\n        margin-bottom: 7px;\n      }\n    }\n    button {\n      margin-top: 10px;\n    }\n  }\n"]);return I=function(){return e},e}function N(){var e=Object(l.a)(["\n  color: ",";\n  cursor: pointer;\n"]);return N=function(){return e},e}function $(){var e=Object(l.a)(["\n  text-align: center;\n  padding: 20px 0px;\n"]);return $=function(){return e},e}function F(){var e=Object(l.a)(["\n  ","\n  border-radius:0px;\n  width: 100%;\n  max-width: 350px;\n"]);return F=function(){return e},e}function L(){var e=Object(l.a)(["\n  min-height: 80vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return L=function(){return e},e}var A=i.default.div(L()),B=i.default.div(F(),(function(e){return e.theme.whiteBox})),U=Object(i.default)(B)($()),q=i.default.span(N(),(function(e){return e.theme.blueColor})),T=Object(i.default)(B)(I()),z=function(e){var n=e.action,t=e.userName,r=e.firstName,c=e.lastName,o=e.email,l=e.setAction,u=e.onSubmit,i=e.secret;return a.a.createElement(A,null,a.a.createElement(T,null,"logIn"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"Email"},o,{type:"email"})),a.a.createElement(C,{text:"Log in"})),"signUp"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"First name"},r)),a.a.createElement(S,Object.assign({placeholder:"Last name"},c)),a.a.createElement(S,Object.assign({placeholder:"Email"},o,{type:"email"})),a.a.createElement(S,Object.assign({placeholder:"userName"},t)),a.a.createElement(C,{text:"Sign up"})),"confirm"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"Paste your secret",required:!0},i)),a.a.createElement(C,{text:"Confirm"}))),"confirm"!==n&&a.a.createElement(U,null,"logIn"===n?a.a.createElement(a.a.Fragment,null,"Don't have an account?"," ",a.a.createElement(q,{onClick:function(){return l("signUp")}},"Sign up")):a.a.createElement(a.a.Fragment,null,"Have an account?"," ",a.a.createElement(q,{onClick:function(){return l("logIn")}},"Log in"))))},D=function(e){var n=Object(r.useState)(e),t=Object(O.a)(n,2),a=t[0],c=t[1];return{value:a,onChange:function(e){var n=e.target.value;c(n)}}},G=t(81);function R(){var e=Object(l.a)(["\n  mutation logUserIn($token: String!) {\n    logUserIn(token: $token) @client\n  }\n"]);return R=function(){return e},e}function M(){var e=Object(l.a)(["\n  mutation confirmSecret($secret: String!, $email: String!) {\n    confirmSecret(secret: $secret, email: $email)\n  }\n"]);return M=function(){return e},e}function P(){var e=Object(l.a)(["\n  mutation createAccount(\n    $userName: String!\n    $email: String!\n    $firstName: String\n    $lastName: String\n  ) {\n    createAccount(\n      userName: $userName\n      email: $email\n      firstName: $firstName\n      lastName: $lastName\n    )\n  }\n"]);return P=function(){return e},e}function H(){var e=Object(l.a)(["\n  mutation requestSecret($email: String!) {\n    requestSecret(email: $email)\n  }\n"]);return H=function(){return e},e}var J=Object(u.b)(H()),Y=Object(u.b)(P()),_=Object(u.b)(M()),K=Object(u.b)(R()),Q=function(){var e=Object(r.useState)("logIn"),n=Object(O.a)(e,2),t=n[0],c=n[1],o=D("\ud55c"),l=D("\ud55c"),u=D("\uc9c0\ud6c8"),i=D(""),m=D("abhidhamma91@gmail.com"),f=Object(G.a)(J,{variables:{email:m.value}}),b=Object(O.a)(f,1)[0],d=Object(G.a)(Y,{variables:{email:m.value,userName:o.value,firstName:l.value,lastName:u.value}}),g=Object(O.a)(d,1)[0],p=Object(G.a)(_,{variables:{email:m.value,secret:i.value}}),v=Object(O.a)(p,1)[0],h=Object(G.a)(K),E=Object(O.a)(h,1)[0];return a.a.createElement(z,{setAction:c,action:t,userName:o,firstName:l,lastName:u,email:m,secret:i,onSubmit:function(e){var n,r,a,f;return x.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e.preventDefault(),"logIn"!==t){d.next=19;break}if(""===m.value){d.next=16;break}return d.prev=3,d.next=6,x.a.awrap(b());case 6:n=d.sent,n.data.requestSecret?(s.b.success("Check your inbox for your login secret"),c("confirm")):(s.b.error("You dont have an account yet, create one"),setTimeout((function(){return c("signUp")}),3e3)),d.next=14;break;case 11:d.prev=11,d.t0=d.catch(3),console.log(d.t0);case 14:d.next=17;break;case 16:s.b.error("Email is required");case 17:d.next=55;break;case 19:if("signUp"!==t){d.next=37;break}if(""===m.value||""===o.value||""===l.value||""===u.value){d.next=34;break}return d.prev=21,d.next=24,x.a.awrap(g());case 24:r=d.sent,r.data.createAccount?(s.b.success("Account created! Log In now"),setTimeout((function(){return c("logIn")}),3e3)):s.b.error("Can't create account"),d.next=32;break;case 29:d.prev=29,d.t1=d.catch(21),s.b.error(d.t1.message);case 32:d.next=35;break;case 34:s.b.error("All field are required");case 35:d.next=55;break;case 37:if("confirm"!==t){d.next=55;break}if(""===i.value){d.next=55;break}return d.prev=39,d.next=42,x.a.awrap(v());case 42:if(a=d.sent,f=a.data.confirmSecret,console.log(f),""===f||void 0===f){d.next=49;break}E({variables:{token:f}}),d.next=50;break;case 49:throw Error();case 50:d.next=55;break;case 52:d.prev=52,d.t2=d.catch(39),s.b.error("Cant confirm secret,check again");case 55:case"end":return d.stop()}}),null,null,[[3,11],[21,29],[39,52]])}})},V=function(){return"feed"},W=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{exact:!0,path:"/",component:V}))},X=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{exact:!0,path:"/",component:Q}))},Z=function(e){var n=e.isLoggedIn;return a.a.createElement(h.a,null,a.a.createElement(v.c,null,n?a.a.createElement(W,null):a.a.createElement(X,null)))};function ee(){var e=Object(l.a)(["\n  color: ",";\n"]);return ee=function(){return e},e}function ne(){var e=Object(l.a)(["\n  color: ",";\n"]);return ne=function(){return e},e}function te(){var e=Object(l.a)(["\n  &:not(:last-child) {\n    margin-right: 16px;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(l.a)(["\n  display: flex;\n"]);return re=function(){return e},e}function ae(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  text-transform: uppercase;\n  font-weight: 600;\n  font-size: 12px;\n"]);return ae=function(){return e},e}var ce=i.default.footer(ae()),oe=i.default.ul(re()),le=i.default.li(te()),ue=i.default.a(ne(),(function(e){return e.theme.darkBlueColor})),ie=i.default.span(ee(),(function(e){return e.theme.darkGreyColor})),me=function(){return a.a.createElement(ce,null,a.a.createElement(oe,null,a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"about us")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"support")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"press")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"api")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"jobs")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"privacy")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"terms")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"directory")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"profiles")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"hashtags")),a.a.createElement(le,null,a.a.createElement(ue,{href:"#"},"language"))),a.a.createElement(ie,null,"Instaclone ",(new Date).getFullYear()," \xa9"))};function se(){var e=Object(l.a)(["\n  margin: 0 auto;\n  max-width: 935px;\n  width: 100%;\n"]);return se=function(){return e},e}function fe(){var e=Object(l.a)(["\n  {\n    isLoggedIn @client\n  }\n"]);return fe=function(){return e},e}var be=Object(u.b)(fe()),de=i.default.div(se()),ge={isLoggedIn:Boolean(localStorage.getItem("token"))||!1},pe={Mutation:{logUserIn:function(e,n,t){var r=n.token,a=t.cache;return localStorage.setItem("token",r),a.writeData({data:{isLoggedIn:!0}}),null},logUserOut:function(e,n,t){t.cache;return localStorage.removeItem("token"),window.location="/",null}}},ve=new u.a({uri:"http://118.43.222.83:4000/",clientState:{defaults:ge,resolvers:pe}}),he=t(30);o.a.render(a.a.createElement(he.a,{client:ve},a.a.createElement((function(){var e=Object(m.a)(be).data.isLoggedIn;return a.a.createElement(i.ThemeProvider,{theme:p},a.a.createElement(de,null,a.a.createElement(g,null),a.a.createElement(Z,{isLoggedIn:e}),a.a.createElement(me,null),a.a.createElement(s.a,{position:s.b.POSITION.BOTTOM_LEFT})))}),null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.dc8a544f.chunk.js.map