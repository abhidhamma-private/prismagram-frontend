(this["webpackJsonpprismagram-frontend"]=this["webpackJsonpprismagram-frontend"]||[]).push([[0],{56:function(e,n,t){e.exports=t(77)},77:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(22),c=t.n(o),i=t(6),u=t(17),l=t(7),s=t(82),m=t(14),f=(t(61),t(43)),b=t.n(f);function d(){var e=Object(i.a)(["\n    ",";\n    @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600,700');\n    * {\n        box-sizing:border-box;\n    }\n    body {\n        background-color:",";\n        color:",";\n        font-size:14px;\n        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    }\n    a {\n        color:",";\n        text-decoration:none;\n    }\n    input:focus{\n        outline:none;\n    }\n"]);return d=function(){return e},e}var g=Object(l.createGlobalStyle)(d(),b.a,(function(e){return e.theme.bgColor}),(function(e){return e.theme.blackColor}),(function(e){return e.theme.blueColor})),p={bgColor:"#FAFAFA",blackColor:"#262626",darkGreyColor:"#999",lightGreyColor:"#c7c7c7",redColor:"#ED4956",blueColor:"#3897f0",darkBlueColor:"#003569",boxBorder:"1px solid #e6e6e6",borderRadius:"4px",whiteBox:"border:".concat("1px solid #e6e6e6",";\n             border-radius:").concat("4px",";\n             background-color:white;\n            "),primaryColor:"#65676B",primaryColorInverted:"#ff9d76",ActiveColor:"#1877F2",INDIGO:"#3f51b5",DEEPORANGE:"#3f51b5",AMBER:"#3f51b5",PURPLE:"#3f51b5",BLUE:"#3f51b5",TEAL:"#3f51b5"},v=t(20),h=t(53),x=t(25),E=t.n(x),O=t(21);function j(){var e=Object(i.a)(["\n  border: 0;\n  border: ",";\n  border-radius: ",";\n  background-color: ",";\n  height: 35px;\n  font-size: 12px;\n  padding: 0px 15px;\n"]);return j=function(){return e},e}var k=l.default.input(j(),(function(e){return e.theme.boxBorder}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.bgColor})),S=function(e){var n=e.placeholder,t=e.required,r=void 0===t||t,o=e.value,c=e.onChange,i=e.type,u=void 0===i?"text":i;return a.a.createElement(k,{placeholder:n,required:r,value:o,onChange:c,type:u})};function w(){var e=Object(i.a)(["\n  width: 100%;\n  border: 0;\n  border-radius: ",";\n  color: white;\n  font-weight: 600;\n  background-color: ",";\n  text-align: center;\n  padding: 7px 0px;\n  font-size: 14px;\n"]);return w=function(){return e},e}var I=l.default.button(w(),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.blueColor})),y=function(e){var n=e.text;return a.a.createElement(I,null,n)};function C(){var e=Object(i.a)(["\n  padding: 40px;\n  padding-bottom: 30px;\n  margin-bottom: 15px;\n  form {\n    width: 100%;\n    input {\n      width: 100%;\n      &:not(:last-child) {\n        margin-bottom: 7px;\n      }\n    }\n    button {\n      margin-top: 10px;\n    }\n  }\n"]);return C=function(){return e},e}function N(){var e=Object(i.a)(["\n  color: ",";\n  cursor: pointer;\n"]);return N=function(){return e},e}function $(){var e=Object(i.a)(["\n  text-align: center;\n  padding: 20px 0px;\n"]);return $=function(){return e},e}function A(){var e=Object(i.a)(["\n  ","\n  border-radius:0px;\n  width: 100%;\n  max-width: 350px;\n"]);return A=function(){return e},e}function L(){var e=Object(i.a)(["\n  min-height: 80vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return L=function(){return e},e}var B=l.default.div(L()),F=l.default.div(A(),(function(e){return e.theme.whiteBox})),U=Object(l.default)(F)($()),q=l.default.span(N(),(function(e){return e.theme.blueColor})),T=Object(l.default)(F)(C()),D=function(e){var n=e.action,t=e.userName,r=e.firstName,o=e.lastName,c=e.email,i=e.setAction,u=e.onSubmit,l=e.secret;return a.a.createElement(B,null,a.a.createElement(T,null,"logIn"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"Email"},c,{type:"email"})),a.a.createElement(y,{text:"Log in"})),"signUp"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"First name"},r)),a.a.createElement(S,Object.assign({placeholder:"Last name"},o)),a.a.createElement(S,Object.assign({placeholder:"Email"},c,{type:"email"})),a.a.createElement(S,Object.assign({placeholder:"userName"},t)),a.a.createElement(y,{text:"Sign up"})),"confirm"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(S,Object.assign({placeholder:"Paste your secret",required:!0},l)),a.a.createElement(y,{text:"Confirm"}))),"confirm"!==n&&a.a.createElement(U,null,"logIn"===n?a.a.createElement(a.a.Fragment,null,"Don't have an account?"," ",a.a.createElement(q,{onClick:function(){return i("signUp")}},"Sign up")):a.a.createElement(a.a.Fragment,null,"Have an account?"," ",a.a.createElement(q,{onClick:function(){return i("logIn")}},"Log in"))))},R=function(e){var n=Object(r.useState)(e),t=Object(O.a)(n,2),a=t[0],o=t[1];return{value:a,onChange:function(e){var n=e.target.value;o(n)}}},G=t(81);function P(){var e=Object(i.a)(["\n  mutation logUserIn($token: String!) {\n    logUserIn(token: $token) @client\n  }\n"]);return P=function(){return e},e}function z(){var e=Object(i.a)(["\n  mutation confirmSecret($secret: String!, $email: String!) {\n    confirmSecret(secret: $secret, email: $email)\n  }\n"]);return z=function(){return e},e}function M(){var e=Object(i.a)(["\n  mutation createAccount(\n    $userName: String!\n    $email: String!\n    $firstName: String\n    $lastName: String\n  ) {\n    createAccount(\n      userName: $userName\n      email: $email\n      firstName: $firstName\n      lastName: $lastName\n    )\n  }\n"]);return M=function(){return e},e}function H(){var e=Object(i.a)(["\n  mutation requestSecret($email: String!) {\n    requestSecret(email: $email)\n  }\n"]);return H=function(){return e},e}var J=Object(u.b)(H()),Y=Object(u.b)(M()),_=Object(u.b)(z()),K=Object(u.b)(P()),Q=function(){var e=Object(r.useState)("logIn"),n=Object(O.a)(e,2),t=n[0],o=n[1],c=R("\ud55c"),i=R("\ud55c"),u=R("\uc9c0\ud6c8"),l=R(""),s=R("abhidhamma91@gmail.com"),f=Object(G.a)(J,{variables:{email:s.value}}),b=Object(O.a)(f,1)[0],d=Object(G.a)(Y,{variables:{email:s.value,userName:c.value,firstName:i.value,lastName:u.value}}),g=Object(O.a)(d,1)[0],p=Object(G.a)(_,{variables:{email:s.value,secret:l.value}}),v=Object(O.a)(p,1)[0],h=Object(G.a)(K),x=Object(O.a)(h,1)[0];return a.a.createElement(D,{setAction:o,action:t,userName:c,firstName:i,lastName:u,email:s,secret:l,onSubmit:function(e){var n,r,a,f;return E.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e.preventDefault(),"logIn"!==t){d.next=19;break}if(""===s.value){d.next=16;break}return d.prev=3,d.next=6,E.a.awrap(b());case 6:n=d.sent,n.data.requestSecret?(m.b.success("Check your inbox for your login secret"),o("confirm")):(m.b.error("You dont have an account yet, create one"),setTimeout((function(){return o("signUp")}),3e3)),d.next=14;break;case 11:d.prev=11,d.t0=d.catch(3),console.log(d.t0);case 14:d.next=17;break;case 16:m.b.error("Email is required");case 17:d.next=55;break;case 19:if("signUp"!==t){d.next=37;break}if(""===s.value||""===c.value||""===i.value||""===u.value){d.next=34;break}return d.prev=21,d.next=24,E.a.awrap(g());case 24:r=d.sent,r.data.createAccount?(m.b.success("Account created! Log In now"),setTimeout((function(){return o("logIn")}),3e3)):m.b.error("Can't create account"),d.next=32;break;case 29:d.prev=29,d.t1=d.catch(21),m.b.error(d.t1.message);case 32:d.next=35;break;case 34:m.b.error("All field are required");case 35:d.next=55;break;case 37:if("confirm"!==t){d.next=55;break}if(""===l.value){d.next=55;break}return d.prev=39,d.next=42,E.a.awrap(v());case 42:if(a=d.sent,f=a.data.confirmSecret,console.log(f),""===f||void 0===f){d.next=49;break}x({variables:{token:f}}),d.next=50;break;case 49:throw Error();case 50:d.next=55;break;case 52:d.prev=52,d.t2=d.catch(39),m.b.error("Cant confirm secret,check again");case 55:case"end":return d.stop()}}),null,null,[[3,11],[21,29],[39,52]])}})};function V(){var e=Object(i.a)(["\n  color: white;\n  align-self: center;\n  justify-self: center;\n"]);return V=function(){return e},e}function W(){var e=Object(i.a)(["\n  display: grid;\n  width: 100vw;\n  height: 100vh;\n  align-self: center;\n  justify-self: center;\n  background: ",";\n"]);return W=function(){return e},e}var X=l.default.div(W(),(function(e){return e.theme.INDIGO})),Z=l.default.div(V()),ee=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(X,null,a.a.createElement(Z,null,a.a.createElement("h1",null,"\ub85c\uadf8\uc778\uc131\uacf5^-^//"))))},ne=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{exact:!0,path:"/",component:ee}))},te=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{exact:!0,path:"/",component:Q}))},re=function(e){var n=e.isLoggedIn;return a.a.createElement(h.a,null,a.a.createElement(v.c,null,n?a.a.createElement(ne,null):a.a.createElement(te,null)))};function ae(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 935px;\n  width: 100vw;\n  display: grid;\n"]);return ae=function(){return e},e}function oe(){var e=Object(i.a)(["\n  {\n    isLoggedIn @client\n  }\n"]);return oe=function(){return e},e}var ce=Object(u.b)(oe()),ie=l.default.div(ae()),ue={isLoggedIn:Boolean(localStorage.getItem("token"))||!1},le={Mutation:{logUserIn:function(e,n,t){var r=n.token,a=t.cache;return localStorage.setItem("token",r),a.writeData({data:{isLoggedIn:!0}}),null},logUserOut:function(e,n,t){t.cache;return localStorage.removeItem("token"),window.location="/",null}}},se=new u.a({uri:"http://118.43.222.83:4000/",clientState:{defaults:ue,resolvers:le}}),me=t(30);c.a.render(a.a.createElement(me.a,{client:se},a.a.createElement((function(){var e=Object(s.a)(ce).data.isLoggedIn;return a.a.createElement(l.ThemeProvider,{theme:p},a.a.createElement(ie,null,a.a.createElement(g,null),a.a.createElement(re,{isLoggedIn:e}),a.a.createElement(m.a,{position:m.b.POSITION.BOTTOM_LEFT})))}),null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.77c32b1a.chunk.js.map