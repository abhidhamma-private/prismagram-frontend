(this["webpackJsonpprismagram-frontend"]=this["webpackJsonpprismagram-frontend"]||[]).push([[0],{56:function(e,n,t){e.exports=t(77)},77:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(21),c=t.n(o),l=t(6),u=t(20),i=t(7),m=t(82),s=t(14),f=(t(61),t(43)),d=t.n(f);function b(){var e=Object(l.a)(["\n    ",";\n    @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600,700');\n    * {\n        box-sizing:border-box;\n    }\n    body {\n        background-color:",";\n        color:",";\n        font-size:14px;\n        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    }\n    a {\n        color:",";\n        text-decoration:none;\n    }\n    input:focus{\n        outline:none;\n    }\n"]);return b=function(){return e},e}var p=Object(i.createGlobalStyle)(b(),d.a,(function(e){return e.theme.bgColor}),(function(e){return e.theme.blackColor}),(function(e){return e.theme.blueColor})),g={bgColor:"#FAFAFA",blackColor:"#262626",darkGreyColor:"#999",lightGreyColor:"#c7c7c7",redColor:"#ED4956",blueColor:"#3897f0",darkBlueColor:"#003569",boxBorder:"1px solid #e6e6e6",borderRadius:"4px",whiteBox:"border:".concat("1px solid #e6e6e6",";\n             border-radius:").concat("4px",";\n             background-color:white;\n            ")},h=t(19),E=t(53),v=t(31),x=t.n(v),O=t(22);function j(){var e=Object(l.a)(["\n  border: 0;\n  border: ",";\n  border-radius: ",";\n  background-color: ",";\n  height: 35px;\n  font-size: 12px;\n  padding: 0px 15px;\n"]);return j=function(){return e},e}var k=i.default.input(j(),(function(e){return e.theme.boxBorder}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.bgColor})),y=function(e){var n=e.placeholder,t=e.required,r=void 0===t||t,o=e.value,c=e.onChange,l=e.type,u=void 0===l?"text":l;return a.a.createElement(k,{placeholder:n,required:r,value:o,onChange:c,type:u})};function S(){var e=Object(l.a)(["\n  width: 100%;\n  border: 0;\n  border-radius: ",";\n  color: white;\n  font-weight: 600;\n  background-color: ",";\n  text-align: center;\n  padding: 7px 0px;\n  font-size: 14px;\n"]);return S=function(){return e},e}var C=i.default.button(S(),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.blueColor})),w=function(e){var n=e.text;return a.a.createElement(C,null,n)};function I(){var e=Object(l.a)(["\n  padding: 40px;\n  padding-bottom: 30px;\n  margin-bottom: 15px;\n  form {\n    width: 100%;\n    input {\n      width: 100%;\n      &:not(:last-child) {\n        margin-bottom: 7px;\n      }\n    }\n    button {\n      margin-top: 10px;\n    }\n  }\n"]);return I=function(){return e},e}function N(){var e=Object(l.a)(["\n  color: ",";\n  cursor: pointer;\n"]);return N=function(){return e},e}function L(){var e=Object(l.a)(["\n  text-align: center;\n  padding: 20px 0px;\n"]);return L=function(){return e},e}function U(){var e=Object(l.a)(["\n  ","\n  border-radius:0px;\n  width: 100%;\n  max-width: 350px;\n"]);return U=function(){return e},e}function B(){var e=Object(l.a)(["\n  min-height: 80vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return B=function(){return e},e}var F=i.default.div(B()),A=i.default.div(U(),(function(e){return e.theme.whiteBox})),$=Object(i.default)(A)(L()),q=i.default.span(N(),(function(e){return e.theme.blueColor})),R=Object(i.default)(A)(I()),T=function(e){var n=e.action,t=e.username,r=e.firstName,o=e.lastName,c=e.email,l=e.setAction,u=e.onSubmit,i=e.secret;return a.a.createElement(F,null,a.a.createElement(R,null,"logIn"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(y,Object.assign({placeholder:"Email"},c,{type:"email"})),a.a.createElement(w,{text:"Log in"})),"signUp"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(y,Object.assign({placeholder:"First name"},r)),a.a.createElement(y,Object.assign({placeholder:"Last name"},o)),a.a.createElement(y,Object.assign({placeholder:"Email"},c,{type:"email"})),a.a.createElement(y,Object.assign({placeholder:"Username"},t)),a.a.createElement(w,{text:"Sign up"})),"confirm"===n&&a.a.createElement("form",{onSubmit:u},a.a.createElement(y,Object.assign({placeholder:"Paste your secret",required:!0},i)),a.a.createElement(w,{text:"Confirm"}))),a.a.createElement($,null,"logIn"===n?a.a.createElement(a.a.Fragment,null,"Don't have an account?"," ",a.a.createElement(q,{onClick:function(){return l("signUp")}},"Sign up")):a.a.createElement(a.a.Fragment,null,"Have an account?"," ",a.a.createElement(q,{onClick:function(){return l("logIn")}},"Log in"))))},D=function(e){var n=Object(r.useState)(e),t=Object(O.a)(n,2),a=t[0],o=t[1];return{value:a,onChange:function(e){var n=e.target.value;o(n)}}},z=t(81);function G(){var e=Object(l.a)(["\n  mutation createAccount(\n    $username: String!\n    $email: String!\n    $firstName: String\n    $lastName: String\n  ) {\n    createAccount(\n      username: $username\n      email: $email\n      firstName: $firstName\n      lastName: $lastName\n    )\n  }\n"]);return G=function(){return e},e}function P(){var e=Object(l.a)(["\n  mutation requestSecret($email: String!) {\n    requestSecret(email: $email)\n  }\n"]);return P=function(){return e},e}var _=Object(u.b)(P()),M=Object(u.b)(G()),H=function(){var e=Object(r.useState)("logIn"),n=Object(O.a)(e,2),t=n[0],o=n[1],c=D(""),l=D(""),u=D(""),i=D(""),m=D("itnico.las.me@gmail.com"),f=Object(z.a)(_,{variables:{email:m.value}}),d=Object(O.a)(f,1)[0],b=Object(z.a)(M,{variables:{email:m.value,username:c.value,firstName:l.value,lastName:u.value}}),p=Object(O.a)(b,1)[0];return a.a.createElement(T,{setAction:o,action:t,username:c,firstName:l,lastName:u,email:m,secret:i,onSubmit:function(e){var n,r;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),"logIn"!==t){a.next=19;break}if(""===m.value){a.next=16;break}return a.prev=3,a.next=6,x.a.awrap(d());case 6:n=a.sent,n.data.requestSecret?(s.b.success("Check your inbox for your login secret"),o("confirm")):(s.b.error("You dont have an account yet, create one"),setTimeout((function(){return o("signUp")}),3e3)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),s.b.error("Can't request secret, try again");case 14:a.next=17;break;case 16:s.b.error("Email is required");case 17:a.next=35;break;case 19:if("signUp"!==t){a.next=35;break}if(""===m.value||""===c.value||""===l.value||""===u.value){a.next=34;break}return a.prev=21,a.next=24,x.a.awrap(p());case 24:r=a.sent,r.data.createAccount?(s.b.success("Account created! Log In now"),setTimeout((function(){return o("logIn")}),3e3)):s.b.error("Can't create account"),a.next=32;break;case 29:a.prev=29,a.t1=a.catch(21),s.b.error(a.t1.message);case 32:a.next=35;break;case 34:s.b.error("All field are required");case 35:case"end":return a.stop()}}),null,null,[[3,11],[21,29]])}})},J=function(){return"feed"},V=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.a,{exact:!0,path:"/",component:J}))},Y=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.a,{exact:!0,path:"/",component:H}))},K=function(e){var n=e.isLoggedIn;return a.a.createElement(E.a,null,a.a.createElement(h.c,null,n?a.a.createElement(V,null):a.a.createElement(Y,null)))};function Q(){var e=Object(l.a)(["\n  color: ",";\n"]);return Q=function(){return e},e}function W(){var e=Object(l.a)(["\n  color: ",";\n"]);return W=function(){return e},e}function X(){var e=Object(l.a)(["\n  &:not(:last-child) {\n    margin-right: 16px;\n  }\n"]);return X=function(){return e},e}function Z(){var e=Object(l.a)(["\n  display: flex;\n"]);return Z=function(){return e},e}function ee(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  text-transform: uppercase;\n  font-weight: 600;\n  font-size: 12px;\n"]);return ee=function(){return e},e}var ne=i.default.footer(ee()),te=i.default.ul(Z()),re=i.default.li(X()),ae=i.default.a(W(),(function(e){return e.theme.darkBlueColor})),oe=i.default.span(Q(),(function(e){return e.theme.darkGreyColor})),ce=function(){return a.a.createElement(ne,null,a.a.createElement(te,null,a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"about us")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"support")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"press")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"api")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"jobs")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"privacy")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"terms")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"directory")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"profiles")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"hashtags")),a.a.createElement(re,null,a.a.createElement(ae,{href:"#"},"language"))),a.a.createElement(oe,null,"Instaclone ",(new Date).getFullYear()," \xa9"))};function le(){var e=Object(l.a)(["\n  margin: 0 auto;\n  max-width: 935px;\n  width: 100%;\n"]);return le=function(){return e},e}function ue(){var e=Object(l.a)(["\n  {\n    isLoggedIn @client\n  }\n"]);return ue=function(){return e},e}var ie=Object(u.b)(ue()),me=i.default.div(le()),se={isLoggedIn:Boolean(localStorage.getItem("token"))||!1},fe={Mutation:{logUserIn:function(e,n,t){var r=n.token,a=t.cache;return localStorage.setItem("token",r),a.writeData({data:{isLoggedIn:!0}}),null},logUserOut:function(e,n,t){t.cache;return localStorage.removeItem("token"),window.location="/",null}}},de=new u.a({uri:Object({NODE_ENV:"production",PUBLIC_URL:"/prismagram-frontend"}).SERVER_URI,clientState:{defaults:se,resolvers:fe}}),be=t(29);c.a.render(a.a.createElement(be.a,{client:de},a.a.createElement((function(){var e=Object(m.a)(ie).data.isLoggedIn;return a.a.createElement(i.ThemeProvider,{theme:g},a.a.createElement(me,null,a.a.createElement(p,null),a.a.createElement(K,{isLoggedIn:e}),a.a.createElement(ce,null),a.a.createElement(s.a,{position:s.b.POSITION.BOTTOM_LEFT})))}),null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.06abc5b4.chunk.js.map